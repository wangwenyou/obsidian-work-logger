/*
 * Work Logger - Fantastical Style Overhaul
 *
 * This stylesheet aims to replicate the clean, elegant, and
 * information-dense aesthetic of apps like Fantastical.
 */

:root {
    --wl-accent-color: var(--interactive-accent, #4a88f7);
    --wl-accent-color-faint: var(--interactive-accent-rgb, 74, 136, 247);
    --wl-text-on-accent: #fff;
    --wl-radius-l: 12px;
    --wl-radius-m: 8px;
    --wl-radius-s: 50%; /* for circles */
    --wl-font-family: var(--font-interface, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif);
    --wl-transition: 150ms ease-in-out;
}

.work-logger-container {
    padding: 10px 20px;
    max-width: 100%;
    margin: 0 auto;
    font-family: var(--wl-font-family);
    height: 100%;
    display: flex;
    flex-direction: column;
}

/* Header */
.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 4px;
}

.calendar-header h3 {
    margin: 0;
    font-size: 1.2em;
    font-weight: 600;
    color: var(--text-normal);
    transition: var(--wl-transition);
}
.calendar-header h3:hover {
    color: var(--wl-accent-color);
}


.calendar-header button {
    background: transparent;
    border: none;
    color: var(--text-muted);
    border-radius: var(--wl-radius-m);
    padding: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--wl-transition);
}

.calendar-header button:hover {
    background: var(--background-modifier-hover);
    color: var(--text-normal);
}

/* Calendar Grid */
.calendar-grid {
    display: grid;
    grid-template-columns: 32px repeat(7, 1fr);
    flex-grow: 1; /* Make grid fill available space */
    border-top: 1px solid var(--background-modifier-border);
}

.day-header {
    background-color: transparent;
    color: var(--text-muted);
    text-align: center;
    font-weight: 500;
    font-size: 0.8em;
    padding: 8px 0;
    border-bottom: 1px solid var(--background-modifier-border);
}

/* Week Stat Button */
.week-stat-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: var(--text-faint);
    border-right: 1px solid var(--background-modifier-border);
    border-bottom: 1px solid var(--background-modifier-border);
    opacity: 0.5;
    transition: var(--wl-transition);
}

.week-stat-btn:hover {
    background-color: var(--background-modifier-hover);
    opacity: 1;
    color: var(--wl-accent-color);
}
.week-stat-btn svg { width: 16px; height: 16px; }


/* Day Cell */
.day-cell {
    position: relative;
    cursor: pointer;
    transition: background-color var(--wl-transition);
    border-right: 1px solid var(--background-modifier-border);
    border-bottom: 1px solid var(--background-modifier-border);
    padding: 8px 4px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}
/* Remove right border for last column */
.day-cell:nth-child(8n) {
    border-right: none;
}

.day-cell:hover {
    background-color: var(--background-modifier-hover);
}

.day-cell.other-month .day-number span {
    color: var(--text-faint);
}


/* Day Number & "Today" Marker */
.day-number {
    font-weight: 500;
    font-size: 0.9em;
    color: var(--text-normal);
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--wl-radius-s);
    transition: var(--wl-transition);
    z-index: 1;
}

.day-cell.today .day-number {
    background-color: var(--wl-accent-color);
    color: var(--wl-text-on-accent);
    font-weight: 700;
}

/* Task Checkmark */
.task-check {
    color: var(--wl-accent-color);
    opacity: 0;
    transform: scale(0.5);
    transition: all var(--wl-transition);
    position: absolute;
    bottom: 8px;
    right: 8px;
}

.task-check svg {
    width: 14px;
    height: 14px;
}

.day-cell.has-data .task-check {
    opacity: 1;
    transform: scale(1);
}

.day-cell.has-data.today .task-check {
    color: var(--text-on-accent);
    opacity: 0.7;
}

/* Modal styles remain mostly the same, as they are already good */
.stat-table {
    width: 100%;
    border-collapse: separate; border-spacing: 0; margin-top: 15px;
    border: 1px solid var(--background-modifier-border); border-radius: var(--wl-radius-m); overflow: hidden;
}
.stat-table th {
    background-color: var(--background-secondary);
    font-weight: 600; text-align: left; padding: 10px 15px;
    border-bottom: 1px solid var(--background-modifier-border);
}
.stat-table td { padding: 10px 15px; border-bottom: 1px solid var(--background-modifier-border); }
.stat-table tr:last-child td { border-bottom: none; }
.stat-total-row { background-color: var(--background-secondary-alt); font-weight: bold; }
.modal-header-flex { display: flex; align-items: center; margin-bottom: 15px; }
.modal-actions {
    display: flex; gap: 10px; margin-left: auto;
}
.ai-summary-container {
    background-color: var(--background-secondary);
    padding: 20px; border-radius: var(--wl-radius-m);
    min-height: 120px; line-height: 1.6; user-select: text;
    border: 1px solid var(--background-modifier-border); margin-top: 15px; font-size: 0.95em;
}
.ai-loading {
    color: var(--text-muted); display: flex; flex-direction: column; align-items: center;
    justify-content: center; height: 100px; gap: 10px; animation: pulse 2s infinite ease-in-out;
}
.ai-summary-container h1, .ai-summary-container h2, .ai-summary-container h3 {
    margin-top: 1em; margin-bottom: 0.5em; font-size: 1.1em; color: var(--text-normal); border-bottom: none;
}
.ai-summary-container h1:first-child, .ai-summary-container h2:first-child, .ai-summary-container h3:first-child { margin-top: 0; }
.ai-summary-container ul, .ai-summary-container ol { padding-left: 24px; margin: 0.5em 0; }
.ai-summary-container li { margin-bottom: 4px; }
.ai-summary-container p { margin-bottom: 1em; }

@keyframes pulse {
    0% { opacity: 0.6; transform: scale(0.98); }
    50% { opacity: 1; transform: scale(1); }
    100% { opacity: 0.6; transform: scale(0.98); }
}
